<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">


<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>





<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="p">
<meta property="og:type" content="website">
<meta property="og:title" content="for p">
<meta property="og:url" content="http://peiguanmei.com/index.html">
<meta property="og:site_name" content="for p">
<meta property="og:description" content="p">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="for p">
<meta name="twitter:description" content="p">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://peiguanmei.com/"/>





  <title>for p</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8edb062d1192e726ad977783b0956190";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">for p</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://peiguanmei.com/2018/05/30/mysql8配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="peiguanmei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="for p">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/30/mysql8配置/" itemprop="url">mysql8配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-30T08:00:00+08:00">
                2018-05-30
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-05-30T14:33:21+08:00">
                2018-05-30
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/30/mysql8配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/30/mysql8配置/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/05/30/mysql8配置/" class="leancloud_visitors" data-flag-title="mysql8配置">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> archlinux上安装mysql8</h2>
<div class="outline-text-2" id="text-1">
<p>
1.安装 pacman -S mysql
2.根据提示执行 mysqld &#x2013;initialize &#x2013;user=mysql &#x2013;basedir=/usr &#x2013;datadir=/var/lib/mysql
3.启动进程 systemctl start mysqld 如果启动失败可以重启后再试一次或者重新安装
4.登录 第2步中会默认生成一个初始密码,使用 mysql -hlocalhost -uroot -p登陆
5.修改root密码 alter user 'root'@'localhost' identified with mysql_native_password by 'xxx'
  mysql8默认使用caching_sha2_password,当前有些工具不支持,需要改成mysql_native_password,可以修改/etc/mysql/mc.conf,
  添加 default_authentication_plugin=mysql_native_password,有时候程序连接不上数据库就是这个原因,另外有些时候需要更新
  mysql_connect_java的jar包,否则也会连接不上,这个坑了一段时间.
6.查看默认用户等操作 select user,host,plugin,authentication_string from mysql.user;
7.创建用户 create user 'spike'@'%' identified with mysql_native_password by 'xxx';
8.授权远程数据库 grant all privileges on <b>.</b> to 'spike'@'%';
9.查看用户权限 show grants for 'spike'@'%';
10.root默认的host是localhost,代表仅限localhost登录访问,如果需要允许所有ip访问,需要把localhost改成%
   执行 update user set Host='%' where User='root';
</p>
</div>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://peiguanmei.com/2018/03/24/hexo-sync/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="peiguanmei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="for p">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/24/hexo-sync/" itemprop="url">hexo-sync</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-24T08:00:00+08:00">
                2018-03-24
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-03-24T15:07:13+08:00">
                2018-03-24
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/24/hexo-sync/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/03/24/hexo-sync/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/03/24/hexo-sync/" class="leancloud_visitors" data-flag-title="hexo-sync">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> hexo文章同步</h2>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> hexo文章加密</h2>
<div class="outline-text-2" id="text-2"></div></div>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/03/24/hexo-sync/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://peiguanmei.com/2018/03/24/vps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="peiguanmei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="for p">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/24/vps/" itemprop="url">vps</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-24T08:00:00+08:00">
                2018-03-24
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-03-24T15:46:05+08:00">
                2018-03-24
              </time>
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/24/vps/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/03/24/vps/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/03/24/vps/" class="leancloud_visitors" data-flag-title="vps">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 安装arch</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>fdisk -l 查看系统硬盘
</li>
<li>fdisk /dev/sda 对硬盘分区，vps上只分了一个swap分区，其余的都是/分区
<ul class="org-ul">
<li>输入n，建立一个新的分区，磁盘空间从2048扇区开始，一个扇区是512B，分给swap1G空间，
1G=1024*1024*1024B/512=2097152扇区，所以扇区结束地址是2048+2097152=2099200
</li>
<li>接下来另外一个分区就是剩余空间，继续创建分区,然后按enter即可,最后输入w保存
</li>
</ul>
</li>
<li>查看分区情况lsblk
<ul class="org-ul">
<li>用cat /proc/paritions可以查看分区是否生效，或者用 partprobe /dev/sda 刷新
</li>
</ul>
</li>
<li>对分区格式化
<ul class="org-ul">
<li>格式化swap分区  mkswap /dev/sda1  启用swap  swapon /dev/sda1
</li>
<li>格式化/分区  mkfs.ext4 /dev/sda2  挂载目录 mount /dev/sda2 /mnt
</li>
</ul>
</li>
<li>安装系统
<ul class="org-ul">
<li>由于是vps，不需要重新配置pacman源，直接 pacstrap /mnt base base-devel
</li>
<li>生成fstab   genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab
</li>
<li>chroot到新系统配置  arch-chroot /mnt /bin/bash
</li>
<li>设置语言环境 echo LANG=en_US.UTF-8  &gt; /etc/locale.conf
vi /etc/locale.conf 去掉en_US.UTF-8和zh_CN.UTF-8前的注释
locale-gen更新语言
</li>
<li>设置主机名字和密码  echo p &gt; /etc/hostname    passwd
</li>
<li>安装net工具  pacman -S net-tools  dnsutils inetutils
</li>
<li>安装grub(不确定不安装是否可以) pacman -S grub os-prober
grub-install &#x2013;target=i386-pc &#x2013;recheck  /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg
</li>
<li>开机启动网络守护进程  systemctl enable/start dhcpcd
</li>
<li>卸载分区  exit   umount /mnt -R
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 安装shadowsock</h2>
<div class="outline-text-2" id="text-2">
<p>
pacman -S shadowsocks
</p>

<p>
vim /etc/shadowsocks/shadowsocks.json
{
    "server":"0.0.0.0",
    "server_port":8485,
    "local_address":"127.0.0.1",
    "password":"yourpassword",
    "timeout":600,
    "method":"rc4-md5",
    "fast_open":false,
    "workers":1
}
启动 ssserver -c /etc/shadowsocks/example.json -d start
或者 systemctl start shadowsocks-server@shadowsocks
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> ssh配置</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>安装openssh  pacman -S openssh
</li>
<li>配置ssh
<ul class="org-ul">
<li>vim /etc/ssh/sshd_config   修改默认Port端口,修改PermitRootLogin  yes ,修改 password yes
</li>
<li>启动守护进程  systemctl enable/start sshd
</li>
</ul>
</li>
<li>其他机器配置秘钥登录   ssh-keygen -t rsa
ssh-copy-id -i ~/.ssh/id_rsa.pub -p 44422  root@45.77.16.202
</li>
<li>ssh优化   打开 UseDNS no 和  GSSAPIAuthentication no 前面的注释
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 建站软件</h2>
<div class="outline-text-2" id="text-4">
<p>
pacman -S nginx mariadb phpadmin jdk8-openjdk tomcat
</p>
<ul class="org-ul">
<li>mysql安装后设置
<ul class="org-ul">
<li>mysql_install_db &#x2013;user=mysql &#x2013;basedir=/usr &#x2013;datadir=/var/lib/mysql
</li>
<li>systemctl start mysqld
</li>
<li>mysqld_safe &#x2013;skip-grant-tables &amp;
</li>
<li>update user set authentication_string=password('XXXX') where user='root';
</li>
<li>SET PASSWORD = PASSWORD('your_new_password');
</li>
<li>set password for root@localhost = password('root');
</li>
<li>CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass';
</li>
<li>GRANT ALL PRIVILEGES ON <b>.</b> TO 'SPIKE'@'localhost'  IDENTIFIED BY 'password';
</li>
<li>flush privileges;
</li>
</ul>
</li>
<li>mysql 远程登录无法连接
<ul class="org-ul">
<li>允许root从任何主机上连接
GRANT ALL PRIVILEGES ON <b>.</b> TO 'root'@'%' IDENTIFIED BY 'mypassword' WITH GRANT OPTION;
flush privileges;
</li>
<li>只允许从ip为192.168.1.3的主机上连接
GRANT ALL PRIVILEGES ON <b>.</b> TO 'root'@'192.168.1.3' IDENTIFIED BY 'mypassword' WITH GRANT OPTION;
</li>
</ul>
</li>

<li>nginx配置
<ul class="org-ul">
<li>启动 systemctl enable/start nginx
</li>
<li>tomcat端口转发  配置/etc/nginx/nginx.conf
修改server_name   www.peiguanmei.com
在location / 块中添加 proxy_pass  <a href="http://www.peiguanmei.com" target="_blank" rel="noopener">http://www.peiguanmei.com</a>
</li>
<li>静态文件分离  ROOT目录是从tomcat的webapp中拷贝出来的
添加   location ~ \.(js|css|html|jpg|png|gif|swf|flv|mp3|mp4|zip|rar) {
          root  <i>usr/local/ROOT</i>;
      }
</li>
<li>使用 nginx -t 可以测试配置文件是否正确
</li>
<li>修改配置后使用 nginx -s reload 重载或者直接重启服务
</li>
<li>1个网站转发多个端口(注意 最后一个的proxy端口号后是不带 “/” 的）
location <i>blog</i> {
    proxy_pass <a href="http://peiguanmei.com:4000/">http://peiguanmei.com:4000/</a>;
}
location <i>web</i> {
    proxy_pass <a href="http://peiguanmei.com:8090/">http://peiguanmei.com:8090/</a>;
}
location / {
    proxy_pass <a href="http://peiguanmei.com:8080">http://peiguanmei.com:8080</a>;
    root <i>www/www.peiguanmei.com</i>
    index index.html
}
</li>
<li>80端口服务器转发多个域名
server {
    listen 80;
    server_name spike.com;
    location  {
<p>
        proxy_redirect off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass <a href="http://peiguanmei.com:8090">http://peiguanmei.com:8090</a>;
    }
    access_log logs/tomcat1_access.log;
}
server {
    listen 80;
    server_name peiguanmei.com;
    location  {
        proxy_pass <a href="http://peiguanmei.com:8080">http://peiguanmei.com:8080</a>;
    }
    access_log logs/tomcat2_access.log;
}
</p>
</li>
</ul>
</li>
</ul>


<ul class="org-ul">
<li>301绝对跳转 (github.io/后面可以加\(1 相当于http://peiguanmei.github.io/github/)
               location /github/ {
                   rewrite ^/(.*)\) <a href="http://peiguanmei.github.io/" target="_blank" rel="noopener">http://peiguanmei.github.io/</a>;
</li>
<li>tomcat配置
<ul class="org-ul">
<li>启动 systemctl enable/start tomcat8
</li>
<li>修改manager   vim /etc/tomcat8/tomcat-user.xml
&lt;role rolename="manager-gui"/&gt;
&lt;user username="admin" password="password" roles="manager-gui"/&gt;
</li>
</ul>
</li>
<li>ftp配置
<ul class="org-ul">
<li>pacman -S vsftpd
</li>
<li>vim /etc/vsftpd.conf
</li>
<li>ftp客户端快速登录连接不上，需要在站点中修改加密为 只使用普通ftp(不安全)
</li>
<li>创建一个普通用户安装yaourt   useradd -m -g users -G wheel -s /bin/bash spike
</li>
<li>git clone <a href="https://aur.archlinux.org/package-query.git" target="_blank" rel="noopener">https://aur.archlinux.org/package-query.git</a>
</li>
<li>git clone <a href="https://aur.archlinux.org/yaourt.git" target="_blank" rel="noopener">https://aur.archlinux.org/yaourt.git</a>
</li>
<li>makepkg -si
</li>
<li>yaourt  -S  pure-ftpd
</li>
</ul>
</li>

<li>查看端口占用  netstat -anp | grep pure-ftpd
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> hexo设置</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>安装nvm
wget -qO- <a href="https://raw.github.com/creationix/nvm/master/install.sh" target="_blank" rel="noopener">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh
</li>
<li>安装node
<ul class="org-ul">
<li>安装最新版本  nvm install stable
</li>
<li>安装lts稳定版  nvm install v6.11.4
</li>
<li>查看和删除node  nvm ls   |   nvm uninstall stable
</li>
<li>切换node版本  nvm use v6.11.4
</li>
<li>使用默认node，安装完后需要执行 nvm alias current v6.11.4 否则会找不到node
</li>
<li>解决使用nvm导致打开终端速度慢的问题
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; . "$NVM_DIR/nvm.sh" &#x2013;no-use # This loads nvm
alias node='unalias node ; unalias npm ; nvm use default ; node $@'
alias npm='unalias node ; unalias npm ; nvm use default ; npm $@
</li>
<li>安装hexo npm install -g hexo-cli
</li>
</ul>
</li>
<li>hexo配置
<ul class="org-ul">
<li>hexo init &lt;folder&gt;
</li>
<li>cd &lt;folder&gt;
</li>
<li>npm install
</li>
<li>将写好的md文件变成html  hexo generate 或者 hexo g
</li>
<li>本地启动    hexo server 或者 hexo s
输入地址 <a href="http://localhost:4000%E8%AE%BF%E9%97%AE" target="_blank" rel="noopener">http://localhost:4000%E8%AE%BF%E9%97%AE</a>
部署    hexo deploy 或者 hexo d
清除    hexo clean
</li>
<li>hexo主题配置 cd themes &amp;&amp;  git clone <a href="https://github.com/SuperKieran/TKL" target="_blank" rel="noopener">https://github.com/SuperKieran/TKL</a>
                    更新  cd TKL &amp;&amp; git pull
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 域名解析</h2>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 开启bbr加速</h2>
<div class="outline-text-2" id="text-7">
<p>
sudo modprobe tcp_bbr 查看是否有错误
vim /etc/modules-load.d/80-bbr.conf    添加 tcp_bbr
cat /proc/sys/net/ipv4/tcp_available_congestion_control 看是否有 bbr
sudo sysctl net.ipv4.tcp.tcp_congestion_control=bbr
vim /etc/sysctl.d/80-bbr.conf   添加 net.ipv4.tcp_congestion_control = bbr
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> tor代理</h2>
<div class="outline-text-2" id="text-8">
<p>
pacman -S tor
vim /etc/tor/torrc 添加下面的3行
SOCKS5Proxy 127.0.0.1:1080
ExcludeNodes {cn},{hk},{mo},{kp},{ir},{sy},{pk},{cu},{vn} #屏蔽蜜罐节点
strictnodes 1 # 严格节点模式
启动  tar  或者  systemctl start tor
配置浏览器代理 127.0.0.1:9050
</p>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 将vps改成archlinux</h2>
<div class="outline-text-2" id="text-9">
<p>
sudo apt-get update &amp;&amp; sudo apt-get upgrade
sudo apt-get install git
git clone <a href="https://github.com/drizzt/vps2arch.git" target="_blank" rel="noopener">https://github.com/drizzt/vps2arch.git</a>
cd vps2arch
chmod +x ./vps2arch
./vps2arch
###########如果您的VPS位于国内，则建议修改一下vps2arch脚本#############
vim vps2arch
#修改位于第324行的如下参数
</p>
<pre class="example">
${mirrors:="http://mirror.rackspace.com/archlinux http://dgix.ru/mirrors/archlinux"}
</pre>
<p>
改为
</p>
<pre class="example">
${mirrors:="https://mirrors.ustc.edu.cn/archlinux https://mirrors.tuna.tsinghua.edu.cn/archlinux"}
</pre>
<p>
#####################################################################
reboot -f #请使用该命令重启VPS
</p>

<p>
初始化archlinux
</p>

<p>
vi /etc/pacman.d/mirrorlist
###Add up some fastest mirrors on the top of this file，maybe not necessarily needed#########
useradd -m -g users -G audio,lp,optical,storage,video,wheel,games,network,power -s /bin/bash yourname
passwd yourname
pacman -Syu
pacman -S sudo fakeroot git wget htop docker zsh tmux vim
pacman -R vi ###在这里吐槽一下Arch，默认的编辑器本来是vim，但是竟然又被偷偷换回了vi
vim /etc/locale.gen #####注释掉en_US等等
locale-gen ###生成locale
export EDITOR=vim
visudo #########Scroll down and delete or modify the comments before the lines below:########################
yourname ALL=(ALL) NOPASSWD: ALL #When you want to escalate without typing the password into the password frame.
#######################################################
exit root and login to "yourname" using your authenticate.
#######################################################
Now you are logged in as 'yourname'
sh -c "$(wget <a href="https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh" target="_blank" rel="noopener">https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh</a> -O -)"
chsh -s /bin/zsh #type your password
mkdir .ssh
cd .ssh
touch authorized_keys
sudo vim authorized_keys
sudo vim /etc/ssh/sshd_config
</p>


<p>
sshd_config配置
</p>

<p>
PermitRootLogin no
RSAAuthentication yes
PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
AuthorizedKeysFile .ssh/authorized_keys
</p>


<p>
防火墙
</p>

<p>
pacman -S ufw
</p>

<p>
ufw default reject
ufw allow 22/tcp
ufw allow in http
ufw allow in https
vim /etc/ufw/before.rules
#修改配置#允许ping
-A ufw-before-input -p icmp &#x2013;icmp-type echo-request -j ACCEPT
#禁止ping
-A ufw-before-input -p icmp &#x2013;icmp-type echo-request -j DROP
sudo ufw enable
</p>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> test</h2>
<div class="outline-text-2" id="text-10">
<p>
abcedfe
abcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopq
abcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyz
abcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyz
中文测试abcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyzabcedefhigklmnopqrstuvwxyz
###########如果您的VPS位于国内，则建议修改一下vps2arch脚本#############
###########如果您的VPS位于国内，则建议修改一下vps2arch脚本#############中文测试中文测试中文测试中文测试中文测试作为测试作为而啊我是浪费子哦啦时间哦啊i奥啦
如果您的VPS位于国内，则建议修改一下vps2arch脚本中文测试中文测试中文测试中文测试中文测试作为测试作为而啊我是浪费子哦啦时间哦啊i奥啦中我开始偶尔u哦哦啊剖
</p>

<p>
2如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话
3如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话
4如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话
5如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话如果可以的话不行的话
</p>

<p>
6如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样
呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样
呢7如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎
样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎
样呢8如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又
怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又
怎样呢9如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话
又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话又怎样呢如果不行的话
又怎样呢
</p>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> 中文导出自动换行</h2>
<div class="outline-text-2" id="text-11">
<p>
3种系统提供的类加载器种类: 启动类加载器  &lt;-   扩展类加载器  &lt;-  应用程序类加载器  &lt;-  自定义类加载器
</p>

<p>
java双亲委派机制:如果一个类加载器收到了类加载的请求,它首先不会自己去加载这个
类,而是吧这个请求委派给父类加载器去完成,没一个层次的加载器都是这样. 因此所有
的加载请求最终都应该传送到顶层的启动类加载其中,只有当父加载器反馈自己无法完成
这个加载请求(它的搜索范围没有找到所需要的类)时,子加载器才会尝试自己去加载.
</p>

<p>
破坏双亲委派机制:
</p>

<p>
this is a soft
huan hang
this is a test about soft
line-breaks for ox,这里有一个软
换行.
</p>
</div>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">peiguanmei</p>
              <p class="site-description motion-element" itemprop="description">p</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">peiguanmei</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'J4e4DaPsGlYTOlg3E6TzrWwA-gzGzoHsz',
        appKey: 'Vn91Y1KWaqsmCXrBfoaTrPVs',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("J4e4DaPsGlYTOlg3E6TzrWwA-gzGzoHsz", "Vn91Y1KWaqsmCXrBfoaTrPVs");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
